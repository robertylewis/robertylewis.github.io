<!DOCTYPE html><html lang="en"><head><title>core.init.meta.declaration</title><meta charset="UTF-8"><link rel="stylesheet" href="https://robertylewis.com/mathlib_docs/style.css"></head><body><div class="mod_doc"><p></p>
</div><div class="cnst"><a id="reducibility_hints"></a>      <span class="decl_name">reducibility_hints</span>  <span class="decl_args">:</span>       <div class="decl_type">Type</div>
<div class="indent"><p>Reducibility hints are used in the convertibility checker.
When trying to solve a constraint such a</p>

<pre><code>       (f ...) =?= (g ...)
</code></pre>

<p>where f and g are definitions, the checker has to decide which one will be unfolded.
  If      f (g) is opaque,     then g (f) is unfolded if it is also not marked as opaque,
  Else if f (g) is abbrev,     then f (g) is unfolded if g (f) is also not marked as abbrev,
  Else if f and g are regular, then we unfold the one with the biggest definitional height.
  Otherwise both are unfolded.</p>

<p>The arguments of the <code>regular</code> constructor are: the definitional height and the flag <code>self_opt</code>.</p>

<p>The definitional height is by default computed by the kernel. It only takes into account
other regular definitions used in a definition. When creating declarations using meta-programming,
we can specify the definitional depth manually.</p>

<p>For definitions marked as regular, we also have a hint for constraints such as</p>

<pre><code>      (f a) =?= (f b)
</code></pre>

<p>if self_opt == true, then checker will first try to solve (a =?= b), only if it fails,
it unfolds f.</p>

<p>Remark: the hint only affects performance. None of the hints prevent the kernel from unfolding a
declaration during type checking.</p>

<p>Remark: the reducibility<em>hints are not related to the attributes: reducible/irrelevance/semireducible.
These attributes are used by the elaborator. The reducibility</em>hints are used by the kernel (and elaborator).
Moreover, the reducibility_hints cannot be changed after a declaration is added to the kernel.</p>
       </div>
</div><div class="cnst"><a id="declaration"></a>      <span class="decl_name">declaration</span>  <span class="decl_args">:</span>       <div class="decl_type">Type</div>
<div class="indent"><p>Reflect a C++ declaration object. The VM replaces it with the C++ implementation.</p>
       </div>
</div><div class="def"><a id="mk_definition"></a>      <span class="decl_name">mk_definition</span> <span class="decl_args">(n : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(ls : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(v e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.to_name"></a>      <span class="decl_name">declaration.to_name</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.univ_params"></a>      <span class="decl_name">declaration.univ_params</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.type"></a>      <span class="decl_name">declaration.type</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.value"></a>      <span class="decl_name">declaration.value</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.value_task"></a>      <span class="decl_name">declaration.value_task</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/task.html#task">task</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.is_trusted"></a>      <span class="decl_name">declaration.is_trusted</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.update_type"></a>      <span class="decl_name">declaration.update_type</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.update_name"></a>      <span class="decl_name">declaration.update_name</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.update_value"></a>      <span class="decl_name">declaration.update_value</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.update_value_task"></a>      <span class="decl_name">declaration.update_value_task</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/task.html#task">task</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.map_value"></a>      <span class="decl_name">declaration.map_value</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a> â†’ <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.to_definition"></a>      <span class="decl_name">declaration.to_definition</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.is_definition"></a>      <span class="decl_name">declaration.is_definition</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="declaration.instantiate_type_univ_params"></a>      <span class="decl_name">declaration.instantiate_type_univ_params</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/level.html#level">level</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Instantiate a universe polymorphic declaration type with the given universes.</p>
       </div>
</div><div class="cnst"><a id="declaration.instantiate_value_univ_params"></a>      <span class="decl_name">declaration.instantiate_value_univ_params</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/level.html#level">level</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Instantiate a universe polymorphic declaration value with the given universes.</p>
       </div>
</div></body></html>